!function(){function textProp(el){return"undefined"!=typeof el.value?"value":"undefined"!=typeof el.text?"text":"undefined"!=typeof el.textContent?"textContent":"innerText"}function Range(){}function IERange(){}function iestart(rng,constraint){var len=constraint.text.replace(/\r/g,"").length;if(rng.compareEndPoints("StartToStart",constraint)<=0)return 0;if(rng.compareEndPoints("StartToEnd",constraint)>=0)return len;for(var i=0;rng.compareEndPoints("StartToStart",constraint)>0;++i,rng.moveStart("character",-1));return i}function ieend(rng,constraint){var len=constraint.text.replace(/\r/g,"").length;if(rng.compareEndPoints("EndToEnd",constraint)>=0)return len;if(rng.compareEndPoints("EndToStart",constraint)<=0)return 0;for(var i=0;rng.compareEndPoints("EndToStart",constraint)>0;++i,rng.moveEnd("character",-1));return i}function InputRange(){}function W3CRange(){}function nextnode(node,root){if(node.firstChild)return node.firstChild;if(node.nextSibling)return node.nextSibling;if(node===root)return null;for(;node.parentNode;){if(node=node.parentNode,node==root)return null;if(node.nextSibling)return node.nextSibling}return null}function w3cmoveBoundary(rng,n,bStart,el){if(!(0>=n)){var node=rng[bStart?"startContainer":"endContainer"];for(3==node.nodeType&&(n+=rng[bStart?"startOffset":"endOffset"]);node;){if(3==node.nodeType){if(n<=node.nodeValue.length){if(rng[bStart?"setStart":"setEnd"](node,n),n==node.nodeValue.length){for(var next=nextnode(node,el);next&&3==next.nodeType&&0==next.nodeValue.length;next=nextnode(next,el))rng[bStart?"setStartAfter":"setEndAfter"](next);next&&1==next.nodeType&&"BR"==next.nodeName&&rng[bStart?"setStartAfter":"setEndAfter"](next)}return}rng[bStart?"setStartAfter":"setEndAfter"](node),n-=node.nodeValue.length}node=nextnode(node,el)}}}function w3cstart(rng,constraint){return rng.compareBoundaryPoints(START_TO_START,constraint)<=0?0:rng.compareBoundaryPoints(END_TO_START,constraint)>=0?constraint.toString().length:(rng=rng.cloneRange(),rng.setEnd(constraint.endContainer,constraint.endOffset),constraint.toString().length-rng.toString().length)}function w3cend(rng,constraint){return rng.compareBoundaryPoints(END_TO_END,constraint)>=0?constraint.toString().length:rng.compareBoundaryPoints(START_TO_END,constraint)<=0?0:(rng=rng.cloneRange(),rng.setStart(constraint.startContainer,constraint.startOffset),rng.toString().length)}function NothingRange(){}bililiteRange=function(el,debug){var ret;return ret=debug?new NothingRange:document.selection?new IERange:window.getSelection&&el.setSelectionRange?new InputRange:window.getSelection?new W3CRange:new NothingRange,ret._el=el,ret._textProp=textProp(el),ret._bounds=[0,ret.length()],ret},Range.prototype={length:function(){return this._el[this._textProp].replace(/\r/g,"").length},bounds:function(s){if("all"===s)this._bounds=[0,this.length()];else if("start"===s)this._bounds=[0,0];else if("end"===s)this._bounds=[this.length(),this.length()];else if("selection"===s)this.bounds("all"),this._bounds=this._nativeSelection();else{if(!s){var b=[Math.max(0,Math.min(this.length(),this._bounds[0])),Math.max(0,Math.min(this.length(),this._bounds[1]))];return b}this._bounds=s}return this},select:function(){return this._nativeSelect(this._nativeRange(this.bounds())),this},text:function(text,select){return arguments.length?(this._nativeSetText(text,this._nativeRange(this.bounds())),"start"==select?(this.bounds([this._bounds[0],this._bounds[0]]),this.select()):"end"==select?(this.bounds([this._bounds[0]+text.length,this._bounds[0]+text.length]),this.select()):"all"==select&&(this.bounds([this._bounds[0],this._bounds[0]+text.length]),this.select()),this):this._nativeGetText(this._nativeRange(this.bounds()))},insertEOL:function(){return this._nativeEOL(),this._bounds=[this._bounds[0]+1,this._bounds[0]+1],this}},IERange.prototype=new Range,IERange.prototype._nativeRange=function(bounds){var rng;return"INPUT"==this._el.tagName?rng=this._el.createTextRange():(rng=document.body.createTextRange(),rng.moveToElementText(this._el)),bounds&&(bounds[1]<0&&(bounds[1]=0),bounds[0]>this.length()&&(bounds[0]=this.length()),bounds[1]<rng.text.replace(/\r/g,"").length&&(rng.moveEnd("character",-1),rng.moveEnd("character",bounds[1]-rng.text.replace(/\r/g,"").length)),bounds[0]>0&&rng.moveStart("character",bounds[0])),rng},IERange.prototype._nativeSelect=function(rng){rng.select()},IERange.prototype._nativeSelection=function(){var rng=this._nativeRange(),len=this.length();if("Text"!=document.selection.type)return[len,len];var sel=document.selection.createRange();try{return[iestart(sel,rng),ieend(sel,rng)]}catch(e){return sel.parentElement().sourceIndex<this._el.sourceIndex?[0,0]:[len,len]}},IERange.prototype._nativeGetText=function(rng){return rng.text.replace(/\r/g,"")},IERange.prototype._nativeSetText=function(text,rng){rng.text=text},IERange.prototype._nativeEOL=function(){"undefined"!=typeof this._el.value?this.text("\n"):this._nativeRange(this.bounds()).pasteHTML("<br/>")},InputRange.prototype=new Range,InputRange.prototype._nativeRange=function(bounds){return bounds||[0,this.length()]},InputRange.prototype._nativeSelect=function(rng){this._el.setSelectionRange(rng[0],rng[1])},InputRange.prototype._nativeSelection=function(){return[this._el.selectionStart,this._el.selectionEnd]},InputRange.prototype._nativeGetText=function(rng){return this._el.value.substring(rng[0],rng[1])},InputRange.prototype._nativeSetText=function(text,rng){var val=this._el.value;this._el.value=val.substring(0,rng[0])+text+val.substring(rng[1])},InputRange.prototype._nativeEOL=function(){this.text("\n")},W3CRange.prototype=new Range,W3CRange.prototype._nativeRange=function(bounds){var rng=document.createRange();return rng.selectNodeContents(this._el),bounds&&(w3cmoveBoundary(rng,bounds[0],!0,this._el),rng.collapse(!0),w3cmoveBoundary(rng,bounds[1]-bounds[0],!1,this._el)),rng},W3CRange.prototype._nativeSelect=function(rng){window.getSelection().removeAllRanges(),window.getSelection().addRange(rng)},W3CRange.prototype._nativeSelection=function(){var rng=this._nativeRange();if(0==window.getSelection().rangeCount)return[this.length(),this.length()];var sel=window.getSelection().getRangeAt(0);return[w3cstart(sel,rng),w3cend(sel,rng)]},W3CRange.prototype._nativeGetText=function(rng){return rng.toString()},W3CRange.prototype._nativeSetText=function(text,rng){rng.deleteContents(),rng.insertNode(document.createTextNode(text)),this._el.normalize()},W3CRange.prototype._nativeEOL=function(){var rng=this._nativeRange(this.bounds());rng.deleteContents();var br=document.createElement("br");br.setAttribute("_moz_dirty",""),rng.insertNode(br),rng.insertNode(document.createTextNode("\n")),rng.collapse(!1)};var START_TO_START=0,START_TO_END=1,END_TO_END=2,END_TO_START=3;NothingRange.prototype=new Range,NothingRange.prototype._nativeRange=function(bounds){return bounds||[0,this.length()]},NothingRange.prototype._nativeSelect=function(rng){},NothingRange.prototype._nativeSelection=function(){return[0,0]},NothingRange.prototype._nativeGetText=function(rng){return this._el[this._textProp].substring(rng[0],rng[1])},NothingRange.prototype._nativeSetText=function(text,rng){var val=this._el[this._textProp];this._el[this._textProp]=val.substring(0,rng[0])+text+val.substring(rng[1])},NothingRange.prototype._nativeEOL=function(){this.text("\n")}}(),function($,undefined){"use strict";function isDocument(ele){return rdocument.test(Object.prototype.toString.call(ele))}function windowOfDocument(doc){for(var i=0;i<window.frames.length;i+=1)if(window.frames[i].document===doc)return window.frames[i];return window}function findCenter(elem){var offset,$document,$elem=$(elem);return isDocument($elem[0])?($document=$elem,offset={left:0,top:0}):($document=$($elem[0].ownerDocument||document),offset=$elem.offset()),{x:offset.left+$elem.outerWidth()/2-$document.scrollLeft(),y:offset.top+$elem.outerHeight()/2-$document.scrollTop()}}function findCorner(elem){var offset,$document,$elem=$(elem);return isDocument($elem[0])?($document=$elem,offset={left:0,top:0}):($document=$($elem[0].ownerDocument||document),offset=$elem.offset()),{x:offset.left-document.scrollLeft(),y:offset.top-document.scrollTop()}}var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rdocument=/\[object (?:HTML)?Document\]/;$.fn.simulate=function(type,options){return this.each(function(){new $.simulate(this,type,options)})},$.simulate=function(elem,type,options){var method=$.camelCase("simulate-"+type);this.target=elem,this.options=options||{},this[method]?this[method]():this.simulateEvent(elem,type,this.options)},$.extend($.simulate,{keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},buttonCode:{LEFT:0,MIDDLE:1,RIGHT:2}}),$.extend($.simulate.prototype,{simulateEvent:function(elem,type,options){var event=this.createEvent(type,options);this.dispatchEvent(elem,type,event,options)},createEvent:function(type,options){return rkeyEvent.test(type)?this.keyEvent(type,options):rmouseEvent.test(type)?this.mouseEvent(type,options):void 0},mouseEvent:function(type,options){var event,eventDoc,docEle,body,doc=isDocument(this.target)?this.target:this.target.ownerDocument||document;return options=$.extend({bubbles:!0,cancelable:"mousemove"!==type,view:windowOfDocument(doc),detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:undefined},options),doc.createEvent?(event=doc.createEvent("MouseEvents"),event.initMouseEvent(type,options.bubbles,options.cancelable,options.view,options.detail,options.screenX,options.screenY,options.clientX,options.clientY,options.ctrlKey,options.altKey,options.shiftKey,options.metaKey,options.button,options.relatedTarget||doc.body.parentNode),0===event.pageX&&0===event.pageY&&Object.defineProperty&&(eventDoc=isDocument(event.relatedTarget)?event.relatedTarget:event.relatedTarget.ownerDocument||document,docEle=eventDoc.documentElement,body=eventDoc.body,Object.defineProperty(event,"pageX",{get:function(){return options.clientX+(docEle&&docEle.scrollLeft||body&&body.scrollLeft||0)-(docEle&&docEle.clientLeft||body&&body.clientLeft||0)}}),Object.defineProperty(event,"pageY",{get:function(){return options.clientY+(docEle&&docEle.scrollTop||body&&body.scrollTop||0)-(docEle&&docEle.clientTop||body&&body.clientTop||0)}}))):doc.createEventObject&&(event=doc.createEventObject(),$.extend(event,options),event.button={0:1,1:4,2:2}[event.button]||event.button),event},keyEvent:function(type,options){var event,doc;if(options=$.extend({bubbles:!0,cancelable:!0,view:windowOfDocument(doc),ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:undefined},options),doc=isDocument(this.target)?this.target:this.target.ownerDocument||document,doc.createEvent)try{event=doc.createEvent("KeyEvents"),event.initKeyEvent(type,options.bubbles,options.cancelable,options.view,options.ctrlKey,options.altKey,options.shiftKey,options.metaKey,options.keyCode,options.charCode)}catch(err){event=doc.createEvent("Events"),event.initEvent(type,options.bubbles,options.cancelable),$.extend(event,{view:options.view,ctrlKey:options.ctrlKey,altKey:options.altKey,shiftKey:options.shiftKey,metaKey:options.metaKey,keyCode:options.keyCode,charCode:options.charCode})}else doc.createEventObject&&(event=doc.createEventObject(),$.extend(event,options));return(/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||"[object Opera]"==={}.toString.call(window.opera))&&(event.keyCode=options.charCode>0?options.charCode:options.keyCode,event.charCode=undefined),event},dispatchEvent:function(elem,type,event,options){options.jQueryTrigger===!0?$(elem).trigger($.extend({},event,options,{type:type})):elem.dispatchEvent?elem.dispatchEvent(event):elem.fireEvent&&elem.fireEvent("on"+type,event)},simulateFocus:function(){function trigger(){triggered=!0}var focusinEvent,triggered=!1,$element=$(this.target);$element.bind("focus",trigger),$element[0].focus(),triggered||(focusinEvent=$.Event("focusin"),focusinEvent.preventDefault(),$element.trigger(focusinEvent),$element.triggerHandler("focus")),$element.unbind("focus",trigger)},simulateBlur:function(){function trigger(){triggered=!0}var focusoutEvent,triggered=!1,$element=$(this.target);$element.bind("blur",trigger),$element[0].blur(),setTimeout(function(){$element[0].ownerDocument.activeElement===$element[0]&&$element[0].ownerDocument.body.focus(),triggered||(focusoutEvent=$.Event("focusout"),focusoutEvent.preventDefault(),$element.trigger(focusoutEvent),$element.triggerHandler("blur")),$element.unbind("blur",trigger)},1)}}),$.extend($.simulate.prototype,{simulateDrag:function(){var i=0,target=this.target,options=this.options,center="corner"===options.handle?findCorner(target):findCenter(target),x=Math.floor(center.x),y=Math.floor(center.y),coord={clientX:x,clientY:y},dx=options.dx||(options.x!==undefined?options.x-x:0),dy=options.dy||(options.y!==undefined?options.y-y:0),moves=options.moves||3;for(this.simulateEvent(target,"mousedown",coord);moves>i;i++)x+=dx/moves,y+=dy/moves,coord={clientX:Math.round(x),clientY:Math.round(y)},this.simulateEvent(target.ownerDocument,"mousemove",coord);$.contains(document,target)?(this.simulateEvent(target,"mouseup",coord),this.simulateEvent(target,"click",coord)):this.simulateEvent(document,"mouseup",coord)}})}(jQuery),function($){"use strict";var originalMouseEvent=$.simulate.prototype.mouseEvent,rdocument=/\[object (?:HTML)?Document\]/;$.simulate.prototype.mouseEvent=function(type,options){if(options.pageX||options.pageY){var doc=rdocument.test(Object.prototype.toString.call(this.target))?this.target:this.target.ownerDocument||document;options.clientX=(options.pageX||0)-$(doc).scrollLeft(),options.clientY=(options.pageY||0)-$(doc).scrollTop()}return originalMouseEvent.apply(this,[type,options])}}(jQuery),function($,undefined){"use strict";var SpecialKeyCodes={SHIFT:16,CONTROL:17,ALTERNATIVE:18,META:91,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,ENTER:13,TABULATOR:9,ESCAPE:27,BACKSPACE:8,INSERT:45,DELETE:46,HOME:36,END:35,PAGE_UP:33,PAGE_DOWN:34};SpecialKeyCodes.CTRL=SpecialKeyCodes.CONTROL,SpecialKeyCodes.ALT=SpecialKeyCodes.ALTERNATIVE,SpecialKeyCodes.COMMAND=SpecialKeyCodes.META,SpecialKeyCodes.TAB=SpecialKeyCodes.TABULATOR,SpecialKeyCodes.ESC=SpecialKeyCodes.ESCAPE,$.extend($.simulate.prototype,{simulateKeyCombo:function(){var i,$target=$(this.target),options=$.extend({combo:"",eventProps:{},eventsOnly:!1},this.options),combo=options.combo,comboSplit=combo.split(/(\+)/),plusExpected=!1,holdKeys=[];if(0!==combo.length){for(comboSplit=$.grep(comboSplit,function(part){return""!==part}),i=0;i<comboSplit.length;i+=1){var key=comboSplit[i],keyLowered=key.toLowerCase(),keySpecial=key.toUpperCase().replace("-","_");if(plusExpected){if("+"!==key)throw'Syntax error: expected "+"';plusExpected=!1}else{var keyCode;if(key.length>1){if(keyCode=SpecialKeyCodes[keySpecial],keyCode===undefined)throw'Syntax error: unknown special key "'+key+'" (forgot "+" between keys?)';switch(keyCode){case SpecialKeyCodes.CONTROL:case SpecialKeyCodes.ALT:case SpecialKeyCodes.SHIFT:case SpecialKeyCodes.META:options.eventProps[keyLowered+"Key"]=!0}holdKeys.unshift(keyCode),options.eventProps.keyCode=keyCode,options.eventProps.which=keyCode,options.eventProps.charCode=0,$target.simulate("keydown",options.eventProps)}else keyCode=$.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(key),holdKeys.unshift(keyCode),options.eventProps.keyCode=keyCode,options.eventProps.which=keyCode,options.eventProps.charCode=undefined,$target.simulate("keydown",options.eventProps),options.eventProps.shiftKey&&(key=key.toUpperCase()),options.eventProps.keyCode=key.charCodeAt(0),options.eventProps.charCode=options.eventProps.keyCode,options.eventProps.which=options.eventProps.keyCode,$target.simulate("keypress",options.eventProps),options.eventsOnly===!0||options.eventProps.ctrlKey||options.eventProps.altKey||options.eventProps.metaKey||$target.simulate("key-sequence",{sequence:key,triggerKeyEvents:!1});plusExpected=!0}}if(!plusExpected)throw'Syntax error: expected key (trailing "+"?)';for(options.eventProps.charCode=undefined,i=0;i<holdKeys.length;i+=1){switch(options.eventProps.keyCode=holdKeys[i],options.eventProps.which=holdKeys[i],options.eventProps.keyCode){case SpecialKeyCodes.ALT:options.eventProps.altKey=!1;break;case SpecialKeyCodes.SHIFT:options.eventProps.shiftKey=!1;break;case SpecialKeyCodes.CONTROL:options.eventProps.ctrlKey=!1;break;case SpecialKeyCodes.META:options.eventProps.metaKey=!1}$target.simulate("keyup",options.eventProps)}}}})}(jQuery),function($,undefined){"use strict";$.simulate.prototype.quirks=$.simulate.prototype.quirks||{},$.extend($.simulate.prototype.quirks,{delayedSpacesInNonInputGlitchToEnd:undefined}),$.extend($.simulate.prototype,{simulateKeySequence:function(){function sequenceFinished(){$target.trigger({type:"simulate-keySequence",sequence:sequence}),$.isFunction(opts.callback)&&opts.callback.apply(target,[{sequence:sequence}])}function processNextToken(){var timeElapsed=now()-lastTime;if(timeElapsed>=opts.delay){var match=tokenRegExp.exec(sequence);if(null!==match){var s=match[0];(localkeys[s]||$.simulate.prototype.simulateKeySequence.defaults[s]||$.simulate.prototype.simulateKeySequence.defaults.simplechar)(rng,s,opts),setTimeout(processNextToken,opts.delay)}else sequenceFinished();lastTime=now()}else setTimeout(processNextToken,opts.delay-timeElapsed)}var target=this.target,$target=$(target),opts=$.extend({sequence:"",triggerKeyEvents:!0,eventProps:{},delay:0,callback:undefined},this.options),sequence=opts.sequence;opts.delay=parseInt(opts.delay,10);var localkeys={};$.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd&&!$target.is("input,textarea")&&$.extend(localkeys,{" ":function(rng,s,opts){var internalOpts=$.extend({},opts,{triggerKeyEvents:!1,delay:0,callback:undefined});$.simulate.prototype.simulateKeySequence.defaults.simplechar(rng," ",internalOpts),$.simulate.prototype.simulateKeySequence.defaults["{leftarrow}"](rng,s,internalOpts),$.simulate.prototype.simulateKeySequence.defaults.simplechar(rng,s,opts),$.simulate.prototype.simulateKeySequence.defaults["{del}"](rng,s,internalOpts)}}),$.extend(localkeys,opts,$target.data("simulate-keySequence"));var rng=$.data(target,"simulate-keySequence.selection");if(rng||(rng=bililiteRange(target).bounds("selection"),$.data(target,"simulate-keySequence.selection",rng),$target.bind("mouseup.simulate-keySequence",function(){$.data(target,"simulate-keySequence.selection").bounds("selection")}).bind("keyup.simulate-keySequence",function(evt){9===evt.which?$.data(target,"simulate-keySequence.selection").select():$.data(target,"simulate-keySequence.selection").bounds("selection")})),$target.focus(),"undefined"!=typeof sequence)if(sequence=sequence.replace(/\n/g,"{enter}"),!opts.delay||opts.delay<=0)sequence.replace(/\{[^}]*\}|[^{]+/g,function(s){(localkeys[s]||$.simulate.prototype.simulateKeySequence.defaults[s]||$.simulate.prototype.simulateKeySequence.defaults.simplechar)(rng,s,opts)}),sequenceFinished();else{var tokenRegExp=/\{[^}]*\}|[^{]/g,now=Date.now||function(){return(new Date).getTime()},lastTime=now();processNextToken()}}}),$.extend($.simulate.prototype.simulateKeySequence.prototype,{IEKeyCodeTable:{33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:48,59:186,58:186,61:187,43:187,44:188,60:188,45:189,95:189,46:190,62:190,47:191,63:191,96:192,126:192,91:219,123:219,92:220,124:220,93:221,125:221,39:222,34:222},charToKeyCode:function(character){var specialKeyCodeTable=$.simulate.prototype.simulateKeySequence.prototype.IEKeyCodeTable,charCode=character.charCodeAt(0);return charCode>=64&&90>=charCode||charCode>=48&&57>=charCode?charCode:charCode>=97&&122>=charCode?character.toUpperCase().charCodeAt(0):specialKeyCodeTable[charCode]!==undefined?specialKeyCodeTable[charCode]:charCode}}),$.simulate.prototype.simulateKeySequence.defaults={simplechar:function(rng,s,opts){if(rng.text(s,"end"),opts.triggerKeyEvents)for(var i=0;i<s.length;i+=1){var charCode=s.charCodeAt(i),keyCode=$.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(s.charAt(i));$(rng._el).simulate("keydown",$.extend({},opts.eventProps,{keyCode:keyCode})),$(rng._el).simulate("keypress",$.extend({},opts.eventProps,{keyCode:charCode,which:charCode,charCode:charCode})),$(rng._el).simulate("keyup",$.extend({},opts.eventProps,{keyCode:keyCode}))}},"{{}":function(rng,s,opts){$.simulate.prototype.simulateKeySequence.defaults.simplechar(rng,"{",opts)},"{enter}":function(rng,s,opts){rng.insertEOL(),rng.select(),opts.triggerKeyEvents===!0&&($(rng._el).simulate("keydown",$.extend({},opts.eventProps,{keyCode:13})),$(rng._el).simulate("keypress",$.extend({},opts.eventProps,{keyCode:13,which:13,charCode:13})),$(rng._el).simulate("keyup",$.extend({},opts.eventProps,{keyCode:13})))},"{backspace}":function(rng,s,opts){var b=rng.bounds();b[0]===b[1]&&rng.bounds([b[0]-1,b[0]]),rng.text("","end"),opts.triggerKeyEvents===!0&&($(rng._el).simulate("keydown",$.extend({},opts.eventProps,{keyCode:8})),$(rng._el).simulate("keyup",$.extend({},opts.eventProps,{keyCode:8})))},"{del}":function(rng,s,opts){var b=rng.bounds();b[0]===b[1]&&rng.bounds([b[0],b[0]+1]),rng.text("","end"),opts.triggerKeyEvents===!0&&($(rng._el).simulate("keydown",$.extend({},opts.eventProps,{keyCode:46})),$(rng._el).simulate("keyup",$.extend({},opts.eventProps,{keyCode:46})))},"{rightarrow}":function(rng,s,opts){var b=rng.bounds();b[0]===b[1]&&(b[1]+=1),rng.bounds([b[1],b[1]]).select(),opts.triggerKeyEvents===!0&&($(rng._el).simulate("keydown",$.extend({},opts.eventProps,{keyCode:39})),$(rng._el).simulate("keyup",$.extend({},opts.eventProps,{keyCode:39})))},"{leftarrow}":function(rng,s,opts){var b=rng.bounds();b[0]===b[1]&&(b[0]-=1),rng.bounds([b[0],b[0]]).select(),opts.triggerKeyEvents===!0&&($(rng._el).simulate("keydown",$.extend({},opts.eventProps,{keyCode:37})),$(rng._el).simulate("keyup",$.extend({},opts.eventProps,{keyCode:37})))},"{selectall}":function(rng){rng.bounds("all").select()}},$.simulate.ext_disableQuirkDetection!==!0&&$(document).ready(function(){var $testDiv=$("<div/>").css({height:1,width:1,position:"absolute",left:-1e3,top:-1e3}).appendTo("body");$testDiv.simulate("key-sequence",{sequence:"   ",delay:1,callback:function(){$.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd="   "===$testDiv.text(),$testDiv.remove()}})})}(jQuery),function($,undefined){"use strict";function isDocument(elem){return rdocument.test(Object.prototype.toString.call($(elem)[0]))}function selectFirstMatch(array,check){var i;if($.isFunction(check)){for(i=0;i<array.length;i+=1)if(check(array[i]))return array[i];return null}for(i=0;i<array.length;i+=1)if(array[i])return array[i];return null}function findCenter(elem){var offset,$elem=$(elem);return offset=isDocument($elem[0])?{left:0,top:0}:$elem.offset(),{x:offset.left+$elem.outerWidth()/2,y:offset.top+$elem.outerHeight()/2}}function pageToClientPos(x,y,docRel){var $document;return $document=$(isDocument(y)?y:docRel||document),"number"==typeof x&&"number"==typeof y?{x:x-$document.scrollLeft(),y:y-$document.scrollTop()}:"object"==typeof x&&x.pageX&&x.pageY?{clientX:x.pageX-$document.scrollLeft(),clientY:x.pageY-$document.scrollTop()}:void 0}function elementAtPosition(x,y,docRel){var doc;if(doc=isDocument(y)?y:docRel||document,!doc.elementFromPoint)return null;var clientX=x,clientY=y;if("object"==typeof x&&(x.clientX||x.clientY)&&(clientX=x.clientX||0,clientY=x.clientY||0),elementAtPosition.prototype.check){var sl,ele;(sl=$(doc).scrollTop())>0?(ele=doc.elementFromPoint(0,sl+$(window).height()-1),null!==ele&&"HTML"===ele.tagName.toUpperCase()&&(ele=null),elementAtPosition.prototype.nativeUsesRelative=null===ele):(sl=$(doc).scrollLeft())>0&&(ele=doc.elementFromPoint(sl+$(window).width()-1,0),null!==ele&&"HTML"===ele.tagName.toUpperCase()&&(ele=null),elementAtPosition.prototype.nativeUsesRelative=null===ele),elementAtPosition.prototype.check=0>=sl}return elementAtPosition.prototype.nativeUsesRelative||(clientX+=$(doc).scrollLeft(),clientY+=$(doc).scrollTop()),doc.elementFromPoint(clientX,clientY)}function dragFinished(ele,options){var opts=options||{};$(ele).trigger({type:"simulate-drag"}),$.isFunction(opts.callback)&&opts.callback.apply(ele)}function interpolatedEvents(self,ele,start,drag,options){function interpolationStep(){coords.x+=stepVector.x,coords.y+=stepVector.y;var effectiveCoords={pageX:coords.x,pageY:coords.y};if(interpolOptions.shaky&&(interpolOptions.shaky===!0||!isNaN(parseInt(interpolOptions.shaky,10)))){var amplitude=interpolOptions.shaky===!0?1:parseInt(interpolOptions.shaky,10);effectiveCoords.pageX+=Math.floor(Math.random()*(2*amplitude+1)-amplitude),effectiveCoords.pageY+=Math.floor(Math.random()*(2*amplitude+1)-amplitude)}var clientCoord=pageToClientPos(effectiveCoords,targetDoc),eventTarget=elementAtPosition(clientCoord,targetDoc)||ele;self.simulateEvent(eventTarget,"mousemove",{pageX:Math.round(effectiveCoords.pageX),pageY:Math.round(effectiveCoords.pageY)})}function stepAndSleep(){var timeElapsed=now()-lastTime;if(timeElapsed>=stepDelay)if(stepCount>step)interpolationStep(),step+=1,lastTime=now(),setTimeout(stepAndSleep,stepDelay);else{var pageCoord={pageX:Math.round(start.x+drag.dx),pageY:Math.round(start.y+drag.dy)},clientCoord=pageToClientPos(pageCoord,targetDoc),eventTarget=elementAtPosition(clientCoord,targetDoc)||ele;self.simulateEvent(eventTarget,"mousemove",pageCoord),dragFinished(ele,options)}else setTimeout(stepAndSleep,stepDelay-timeElapsed)}var stepWidth,stepCount,stepVector,targetDoc=selectFirstMatch([ele,ele.ownerDocument],isDocument)||document,interpolOptions=options.interpolation,dragDistance=Math.sqrt(Math.pow(drag.dx,2)+Math.pow(drag.dy,2));if(interpolOptions.stepWidth){stepWidth=parseInt(interpolOptions.stepWidth,10),stepCount=Math.floor(dragDistance/stepWidth)-1;var stepScale=stepWidth/dragDistance;stepVector={x:drag.dx*stepScale,y:drag.dy*stepScale}}else stepCount=parseInt(interpolOptions.stepCount,10),stepWidth=dragDistance/(stepCount+1),stepVector={x:drag.dx/(stepCount+1),y:drag.dy/(stepCount+1)};var lastTime,coords=$.extend({},start);if(!interpolOptions.stepDelay&&!interpolOptions.duration||interpolOptions.stepDelay<=0&&interpolOptions.duration<=0){for(var i=0;stepCount>i;i+=1)interpolationStep();var pageCoord={pageX:Math.round(start.x+drag.dx),pageY:Math.round(start.y+drag.dy)},clientCoord=pageToClientPos(pageCoord,targetDoc),eventTarget=elementAtPosition(clientCoord,targetDoc)||ele;self.simulateEvent(eventTarget,"mousemove",pageCoord),dragFinished(ele,options)}else{var stepDelay=parseInt(interpolOptions.stepDelay,10)||Math.ceil(parseInt(interpolOptions.duration,10)/(stepCount+1)),step=0;lastTime=now(),setTimeout(stepAndSleep,stepDelay)}}$.fn.simulate=function(type,options){switch(type){case"drag":case"drop":case"drag-n-drop":var ele=this.first();return new $.simulate(ele[0],type,options),ele;default:return this.each(function(){new $.simulate(this,type,options)})}};var now=Date.now||function(){return(new Date).getTime()},rdocument=/\[object (?:HTML)?Document\]/;elementAtPosition.prototype.check=!0,elementAtPosition.prototype.nativeUsesRelative=!0,$.simulate.activeDrag=function(){return $.simulate._activeDrag?$.extend(!0,{},$.simulate._activeDrag):undefined},$.extend($.simulate.prototype,{simulateDrag:function(){var start,self=this,ele=self.target,options=$.extend({dx:0,dy:0,dragTarget:undefined,clickToDrag:!1,eventProps:{},interpolation:{stepWidth:0,stepCount:0,stepDelay:0,duration:0,shaky:!1},callback:undefined},this.options),continueDrag=$.simulate._activeDrag&&$.simulate._activeDrag.dragElement===ele;start=continueDrag?$.simulate._activeDrag.dragStart:findCenter(ele);var dx,dy,x=Math.round(start.x),y=Math.round(start.y),coord={pageX:x,pageY:y};if(options.dragTarget){var end=findCenter(options.dragTarget);dx=Math.round(end.x-start.x),dy=Math.round(end.y-start.y)}else dx=options.dx||0,dy=options.dy||0;if(continueDrag?($.simulate._activeDrag.dragDistance.x+=dx,$.simulate._activeDrag.dragDistance.y+=dy,coord={pageX:Math.round(x+$.simulate._activeDrag.dragDistance.x),pageY:Math.round(y+$.simulate._activeDrag.dragDistance.y)}):($.simulate._activeDrag&&$($.simulate._activeDrag.dragElement).simulate("drop"),$.extend(options.eventProps,coord),self.simulateEvent(ele,"mousedown",options.eventProps),options.clickToDrag===!0&&(self.simulateEvent(ele,"mouseup",options.eventProps),self.simulateEvent(ele,"click",options.eventProps)),$(ele).add(ele.ownerDocument).one("mouseup",function(){$.simulate._activeDrag=undefined}),$.extend($.simulate,{_activeDrag:{dragElement:ele,dragStart:{x:x,y:y},dragDistance:{x:dx,y:dy}}}),coord={pageX:Math.round(x+dx),pageY:Math.round(y+dy)}),0!==dx||0!==dy)if(options.interpolation&&(options.interpolation.stepCount||options.interpolation.stepWidth))interpolatedEvents(self,ele,{x:x,y:y},{dx:dx,dy:dy},options);else{var targetDoc=selectFirstMatch([ele,ele.ownerDocument],isDocument)||document,clientCoord=pageToClientPos(coord,targetDoc),eventTarget=elementAtPosition(clientCoord,targetDoc)||ele;$.extend(options.eventProps,coord),self.simulateEvent(eventTarget,"mousemove",options.eventProps),dragFinished(ele,options)}else dragFinished(ele,options)},simulateDrop:function(){var self=this,ele=this.target,activeDrag=$.simulate._activeDrag,options=$.extend({clickToDrop:!1,eventProps:{},callback:undefined},self.options),moveBeforeDrop=!0,center=findCenter(ele),x=Math.round(center.x),y=Math.round(center.y),coord={pageX:x,pageY:y},targetDoc=(activeDrag?selectFirstMatch([activeDrag.dragElement,activeDrag.dragElement.ownerDocument],isDocument):selectFirstMatch([ele,ele.ownerDocument],isDocument))||document,clientCoord=pageToClientPos(coord,targetDoc),eventTarget=elementAtPosition(clientCoord,targetDoc);activeDrag&&(activeDrag.dragElement===ele||isDocument(ele))&&(x=Math.round(activeDrag.dragStart.x+activeDrag.dragDistance.x),y=Math.round(activeDrag.dragStart.y+activeDrag.dragDistance.y),coord={pageX:x,pageY:y},clientCoord=pageToClientPos(coord,targetDoc),eventTarget=elementAtPosition(clientCoord,targetDoc),moveBeforeDrop=!1),eventTarget||(eventTarget=activeDrag?activeDrag.dragElement:ele),$.extend(options.eventProps,coord),moveBeforeDrop===!0&&self.simulateEvent(eventTarget,"mousemove",options.eventProps),options.clickToDrop&&self.simulateEvent(eventTarget,"mousedown",options.eventProps),this.simulateEvent(eventTarget,"mouseup",options.eventProps),options.clickToDrop&&self.simulateEvent(eventTarget,"click",options.eventProps),$.simulate._activeDrag=undefined,$(eventTarget).trigger({type:"simulate-drop"}),$.isFunction(options.callback)&&options.callback.apply(eventTarget)},simulateDragNDrop:function(){var self=this,ele=this.target,options=$.extend({dragTarget:undefined,dropTarget:undefined},self.options),dropEle=(options.dragTarget||options.dx||options.dy?options.dropTarget:ele)||ele;$(ele).simulate("drag",$.extend({},options,{dragTarget:options.dragTarget||(options.dx||options.dy?undefined:options.dropTarget),callback:function(){$(dropEle).simulate("drop",options)}}))}})}(jQuery),window.matchMedia||(window.matchMedia=function(){"use strict";var styleMedia=window.styleMedia||window.media;if(!styleMedia){var style=document.createElement("style"),script=document.getElementsByTagName("script")[0],info=null;style.type="text/css",style.id="matchmediajs-test",script.parentNode.insertBefore(style,script),info="getComputedStyle"in window&&window.getComputedStyle(style,null)||style.currentStyle,styleMedia={matchMedium:function(media){var text="@media "+media+"{ #matchmediajs-test { width: 1px; } }";return style.styleSheet?style.styleSheet.cssText=text:style.textContent=text,"1px"===info.width;

}}}return function(media){return{matches:styleMedia.matchMedium(media||"all"),media:media||"all"}}}()),function($){"use strict";window.laybackTools=window.laybackTools||{};var ObjectWrapper=function(obj){this.init=function(obj){return void 0===obj&&(obj={}),this._obj=obj,this},this.obj=function(){return this._obj},this.get=function(key){return this.obj()[key]},this.size=function(){var key,size=0;for(key in this._obj)this._obj.hasOwnProperty(key)&&size++;return size},this.add=function(value,key,overwrite){return overwrite=void 0===overwrite?!0:!1,key||0===key||(key=this.getNextFreeKey()),this._obj[key]=value,this},this.del=function(key){delete this._obj[key]},this.getNextFreeKey=function(){return"_"+this.size()},this.extend=function(){var args=Array.prototype.slice.call(arguments);return"boolean"==typeof args[0]?args.splice(1,0,this.obj()):args.splice(0,0,this.obj()),$.extend.apply($.extend,args),this},this.each=function(){var args=Array.prototype.slice.call(arguments);return args.splice(0,0,this.obj()),$.each.apply($.each,args),this},this.init(obj)};window.laybackTools.objectWrapper=function(obj){return new ObjectWrapper(obj)}}(jQuery),function($){"use strict";window.laybackTools=window.laybackTools||{};var StringWrapper=function(str){this._str=str,this.dashToCamelCase=function(){return this._str.replace(/-(.)/g,function(match,group){return group.toUpperCase()})}};window.laybackTools.stringWrapper=function(str){return new StringWrapper(str)}}(jQuery),function($,window){"use strict";var _o=window.laybackTools.objectWrapper,Layback=(window.laybackTools.stringWrapper,function(){if(arguments[0]){if("function"==typeof arguments[0])return new Layback.Class(arguments[0]);if("object"==typeof arguments[0]&&!arguments[1])return new Layback.Object(arguments[0]);if("object"==typeof arguments[0]&&arguments[1])return new Layback.Object(arguments[0],arguments[1])}return arguments[0]&&arguments[1]?new Layback.ClassCreator(arguments[0],arguments[1]):Layback.Factory});Layback.Class=function(classObject){function _getClassHandler(){return _classHandler||(_classHandler=new Layback.ClassHandler(This,_classObject)),_classHandler}var _classObject=classObject,_classHandler=null,This=this;return this.make=function(){return _getClassHandler().make(),this},this.use=function(treatName,treatData){return _getClassHandler().addTreat(treatName,treatData),this},this.defaults=function(data){return _getClassHandler().setDefaults(data),this},this.getDefaults=function(data){return _getClassHandler().getDefaults(data)},this.addInitMethod=function(initMethod){return _getClassHandler().addInitMethod(initMethod),this},this.addMethod=function(methodName,method,forced){return _getClassHandler().addMethod(methodName,method,forced),this},this.addClassMethod=function(methodName,method,forced){return _getClassHandler().addClassMethod(methodName,method,forced),this},_classObject.__layback?_classObject.__layback.laybackObject:void _getClassHandler()},Layback.ClassHandler=function(laybackClassObj,classObject){var _laybackClassObj=laybackClassObj,_classObject=classObject;this.init=function(){var This=this;return _classObject.__layback?this:(_classObject.__layback={laybackObject:_laybackClassObj,defaultData:{},treats:{},initMethods:{},appliedTreats:{},methods:{},classMethods:{}},void Layback.Factory.systemTreats().each(function(treatName,treatData){This.addTreat(treatName,treatData)}))},this.make=function(){var This=this;this.addClassMethod("layback",function(){return this.__layback.laybackObject}),this.addMethod("layback",function(options){return this.__layback?this.__layback.laybackObject:new Layback.Object(this,options)}),_o(_classObject.__layback.treats).each(function(treatName,treatData){This.applyTreat(treatName,treatData)})},this.addInitMethod=function(initMethod){_o(_classObject.__layback.initMethods).add(initMethod)},this.addTreat=function(treatName,treatData){_o(_classObject.__layback.treats).add(treatData,treatName)},this.applyTreat=function(treatName){var TreatClass=Layback.Treats.getTreat(treatName),treatData=_classObject.__layback.treats[treatName];_classObject.__layback.appliedTreats[treatName]=new TreatClass(_classObject,treatData)},this.setDefaults=function(data){_classObject.__layback.defaultData=data},this.getDefaults=function(){return _classObject.__layback.defaultData},this.addMethod=function(methodName,method,forced){if(forced=!!forced,!forced&&(_classObject.prototype[methodName]||_classObject.__layback.methods[methodName]))throw new Error("The method already exists! Try using some other name, or use the forced parameter!");(forced||!_classObject.prototype[methodName]&&!_classObject.__layback.methods[methodName])&&(_classObject.__layback.methods[methodName]=method,_classObject.prototype[methodName]=method)},this.addClassMethod=function(methodName,method,forced){if(forced=!!forced,!forced&&(_classObject[methodName]||_classObject.__layback.classMethods[methodName]))throw new Error("The method already exists! Try using some other name, or use the forced parameter!");(forced||!_classObject[methodName]&&!_classObject.__layback.classMethods[methodName])&&(_classObject.__layback.classMethods[methodName]=method,_classObject[methodName]=method)},_classObject.__layback||this.init()},Layback.ClassCreator=function(methodName,method){return window[methodName]=method,new Layback.Class(window[methodName])},Layback.Object=function(obj,options){function _getObjectHandler(){return _objectHandler||(_objectHandler=new Layback.ObjectHandler(This,_obj,_options)),_objectHandler}this.r=Math.random();var _obj=obj,_options=options||{},_objectHandler=null,This=this;return this.setOptions=function(options){return _getObjectHandler().setOptions(options),this},this.getOptions=function(){return _getObjectHandler().getOptions()},this.addNs=function(key,data,pattern){return _getObjectHandler().addNs(key,data,pattern),this},this.getNs=function(key){return _getObjectHandler().getNs(key)},_obj.__layback?_obj.__layback.laybackObject:void _getObjectHandler()},Layback.ObjectHandler=function(laybackObjectObj,obj,options){var _laybackObjectObj=laybackObjectObj,_obj=obj,_options=options||{};this.init=function(){_obj.__layback={id:0,laybackObject:_laybackObjectObj},Layback.Factory.objectPool().addObject(_obj),_o(_obj.constructor.__layback.initMethods).each(function(i,initMethod){initMethod(_obj)})},this.setOptions=function(options){_options=options},this.getOptions=function(){return _options},this.addNs=function(key,data,pattern){data=data||{};var defaults=_obj.constructor.__layback.defaultData[key]||{},keyInObj="layback"+key.charAt(0).toUpperCase()+key.slice(1);_obj[keyInObj]=_obj[keyInObj]||{};var argData={};if(_obj.laybackData&&pattern){var regExp=pattern instanceof RegExp&&pattern||new RegExp(pattern.replace("*","(.*)"));_o(_obj.laybackData).each(function(name,element){var matches=name.match(regExp);matches&&(argData[matches[1].substring(0,1).toLowerCase()+matches[1].substring(1)]=element)})}_obj[keyInObj]=$.extend(!0,{},defaults,_obj[keyInObj],argData,data)},this.getNs=function(key){var keyInObj="layback"+key.charAt(0).toUpperCase()+key.slice(1);return _obj[keyInObj]=_obj[keyInObj]||{},_obj[keyInObj]},_obj.__layback||this.init()},Layback.Treats=function(pool){return Layback.Treats._pool[pool]},$.extend(Layback.Treats,{_pool:{system:_o({}),user:_o({})},getTreats:function(){return $.extend({},this._pool.system.obj(),this._pool.user.obj())},getTreat:function(treatName){return this._pool.user.get(treatName)||this._pool.system.get(treatName)}}),Layback.ObjectPool={_pool:_o({}),getObjects:function(){return this._pool},data:function(){return this._pool.obj()},addObject:function(obj){this._pool.add(obj),obj.__layback.id=this._pool.size()},removeObject:function(obj){if(!obj.__layback.id)throw new Error("Object has No ID");return this._pool.del(obj.__layback.id),this}},Layback.Factory={_systemTreats:new Layback.Treats("system"),_userTreats:new Layback.Treats("user"),tools:function(){return window.laybackTools},systemTreats:function(){return this._systemTreats},treats:function(){return this._userTreats},objectPool:function(){return Layback.ObjectPool}};var layback=function(){function _layback(args){return Layback.apply(this,args)}return _layback.prototype=Layback.prototype,new _layback(Array.prototype.slice.call(arguments))};window.layback=layback}(jQuery,window),function($){"use strict";var _o=window.laybackTools.objectWrapper,DataTreat=function(classObject){layback(classObject).addMethod("set",function(key,value){return _o(this.laybackData).add(value,key),this}).addMethod("get",function(key,defaultValue){return void 0!==this.laybackData[key]?this.laybackData[key]:defaultValue}).addInitMethod(function(obj){var options=obj.layback().getOptions();obj.layback().addNs("data",options)})};layback().systemTreats().add(DataTreat,"data")}($),function($){"use strict";var DomTreat=(window.laybackTools.objectWrapper,function(classObject){layback(classObject).addInitMethod(function(obj){obj.layback().addNs("dom",{},"*Element")}).addMethod("dom",function(){var args=Array.prototype.slice.call(arguments);return this.laybackDom[args[0]]&&(args[0]=this.laybackDom[args[0]]),$.apply($,args)}).addMethod("getElement",function(){return this.dom(this.get("element"))})});layback().systemTreats().add(DomTreat,"dom")}($),function($){"use strict";var _o=window.laybackTools.objectWrapper,_s=window.laybackTools.stringWrapper,EventTreat=function(classObject){layback(classObject).addInitMethod(function(obj){obj.layback().addNs("eventListeners").addNs("callbacks",{},/on([A-Z].*)/),_o(obj.laybackCallbacks).each(function(evt,callback){obj.observe(evt,callback)})}).addMethod("observe",function(evt,callback){return evt=_s(evt).dashToCamelCase(),this.laybackEventListeners[evt]||(this.laybackEventListeners[evt]={}),_o(this.laybackEventListeners[evt]).add(callback),this}).addMethod("dispatch",function(evt,evtData){if(evt=_s(evt).dashToCamelCase(),this.laybackEventListeners[evt]){var This=this;_o(this.laybackEventListeners[evt]).each(function(i,callback){var args=[This,evtData,evt];callback.apply(callback,args)})}return this})};layback().systemTreats().add(EventTreat,"event")}($),function($){"use strict";var _o=window.laybackTools.objectWrapper,CollectionTreat=function(classObject){var setItemCollectionPosition=function(item,pos){item.__laybackCollectionPosition=pos},getItemCollectionPosition=function(item){return item instanceof jQuery?item[0].__laybackCollectionPosition:item.__laybackCollectionPosition},reIndexItems=function(obj){var i=0;_o(obj.laybackCollection.items).each(function(key,item){setItemCollectionPosition(item,i),i++})};layback(classObject).addInitMethod(function(obj){obj.layback().addNs("collection",{items:[]}),reIndexItems(obj)}).addMethod("addCollectionItem",function(item){var This=this;return this.dispatch("collection-additem-before",item),item.constructor==Array||item instanceof jQuery?$.each(item,function(k,val){This.addCollectionItem(val)}):(setItemCollectionPosition(item,this.laybackCollection.items.length),this.laybackCollection.items.push(item)),this.dispatch("collection-additem-after",item),this}).addMethod("getCollectionItems",function(){return this.laybackCollection.items}).addMethod("getCollectionItemPosition",function(item){return getItemCollectionPosition(item)}).addMethod("getCollectionItem",function(index){var itemarr=this.sliceCollectionItems(index,index+1);return itemarr.length?itemarr[0]:!1}).addMethod("removeCollectionItem",function(item){return this.dispatch("collection-removeitem-before",item),"number"==typeof item&&this.laybackCollection.items.splice(item,1),this.laybackCollection.items.splice(getItemCollectionPosition(item),1),reIndexItems(this),this.dispatch("collection-removeitem-after",item),this}).addMethod("getCollectionSize",function(){return this.getCollectionItems().length}).addMethod("setPagerLimit",function(limit){return this.set("pagerLimit",limit),this}).addMethod("getPageItems",function(page,func){var limit=this.get("pagerLimit");return this.sliceCollectionItems(page*limit,(page+1)*limit,func)}).addMethod("eachCollectionItems",function(){var args=Array.prototype.slice.call(arguments);return args.splice(0,0,this.getItems()),$.each.apply($.each,args),this}).addMethod("grepCollectionItems",function(){var args=Array.prototype.slice.call(arguments);return args.splice(0,0,this.getCollectionItems()),$.grep.apply($.grep,args)}).addMethod("sliceCollectionItems",function(start,end,func){var items=this.getCollectionItems().slice(0),slice=items.slice(start,end);return func&&"function"==typeof func&&$.each(slice,func),slice})};layback().treats().add(CollectionTreat,"collection")}($),function($){"use strict";var _o=window.laybackTools.objectWrapper,JqPluginTreat=function(classObject,pluginName){var _classObject=classObject,_pluginName=pluginName,This=this;This._lastReturnValue=null,layback(classObject).addClassMethod("getJqueryPluginObject",function(element){return $(element).data(_pluginName+"-object")}).addClassMethod("getJqueryPluginObjects",function(element){if($(element).length<2)return[this.getJqueryPluginObject(element)];var objects=[],This=this;return $(element).each(function(){objects.push(This.getJqueryPluginObject(element))}),objects}),$.fn[pluginName]||($.fn[pluginName]=function(){var _userArgs=$.makeArray(arguments);this.each(function(){var pluginObject=$(this).data(pluginName+"-object");if(!pluginObject){var userOptions=_userArgs[0]||{},elementOptions=$(this).attr(pluginName+"-options");return elementOptions=elementOptions?eval("("+elementOptions+")"):{},pluginObject=new classObject($.extend(!0,{},userOptions,elementOptions,{element:$(this)})),$(this).data(pluginName+"-object",pluginObject),this}var optionsCopy=_userArgs.slice(0),func=optionsCopy.shift();This._lastReturnValue=pluginObject[func].apply(pluginObject,optionsCopy)})})};layback().treats().add(JqPluginTreat,"jQuery-plugin")}($),function($){"use strict";var _o=window.laybackTools.objectWrapper,ResponsiveTreat=function(classObject){layback(classObject).addInitMethod(function(obj){obj.layback().addNs("breakpoints"),_o(obj.laybackBreakpoints).each(function(name,responderData){responderData.data&&obj.respondTo(name,function(){this.laybackData=$.extend(this.laybackData,responderData.data)})}),ResponsiveTreat.watchWindowSize()}).addMethod("respondTo",function(bpName,func){ResponsiveTreat.addResponder(bpName,this,func)}).addMethod("getCurrentBreakPoint",function(){var currentBreakpoint=null,currentBreakpointVal=0,firstBreakpoint=null,firstBreakpointVal=1e6;return _o(this.laybackBreakpoints).each(function(name,bpData){firstBreakpointVal>bpData.width&&(firstBreakpointVal=bpData.width,firstBreakpoint=name),currentBreakpointVal<bpData.width&&(!ResponsiveTreat.isMqSupported()||matchMedia(ResponsiveTreat.getMqString(bpData.width)).matches)&&(currentBreakpointVal=bpData.width,currentBreakpoint=name)}),0===currentBreakpointVal?{name:firstBreakpoint,width:firstBreakpointVal}:{name:currentBreakpoint,width:currentBreakpointVal}})};ResponsiveTreat=$.extend(ResponsiveTreat,{_isMqSupported:null,_baseFontSize:null,_responders:_o({}),_windowSizeWatched:!1,addResponder:function(name,obj,func){var width=obj.laybackBreakpoints[name].width;this._responders.add({width:width,name:name,obj:obj,responderFunction:func})},isMqSupported:function(){return null===this._isMqSupported&&(this._isMqSupported=!!matchMedia("only all").matches),this._isMqSupported},getBaseFontSize:function(){return null===this._baseFontSize&&(this._baseFontSize=parseFloat($("body").css("font-size"))),this._baseFontSize},getMqString:function(pixels){return"(min-width: "+pixels/this.getBaseFontSize()+"em)"},respond:function(){this._responders.each(function(i,responderData){responderData.width==responderData.obj.getCurrentBreakPoint().width&&responderData.responderFunction.apply(responderData.obj)})},watchWindowSize:function(){if(!this._windowSizeWatched){this._windowSizeWatched=!0;var This=this;jQuery(window).resize(function(){This.respond()}).resize()}}}),layback().treats().add(ResponsiveTreat,"respond")}($),function($){"use strict";var _s=(window.laybackTools.objectWrapper,window.laybackTools.stringWrapper),SetGetTreat=function(classObject){this._class=classObject;var This=this;this.createSetterMethod=function(obj,key){var methodName=_s("set-"+key).dashToCamelCase();layback(This._class).addMethod(methodName,function(value){return this.set(key,value)},!0)},this.createGetterMethod=function(obj,key){var methodName=_s("get-"+key).dashToCamelCase();layback(This._class).addMethod(methodName,function(def){return this.get(key,def)},!0)},layback(classObject).addInitMethod(function(obj){$.each(obj.laybackData,function(key,value){This.createGetterMethod(obj,key),This.createSetterMethod(obj,key)})})};layback().treats().add(SetGetTreat,"setget")}($),jQuery.fn.populate=function(obj,options){function parseJSON(obj,path){if(path=path||"",void 0==obj);else if(obj.constructor==Object)for(var prop in obj){var name=path+(""==path?prop:"["+prop+"]");parseJSON(obj[prop],name)}else if(obj.constructor==Array)for(var i=0;i<obj.length;i++){var index=options.useIndices?i:"";index=options.phpNaming?"["+index+"]":index;var name=path+index;parseJSON(obj[i],name)}else void 0==arr[path]?arr[path]=obj:arr[path].constructor!=Array?arr[path]=[arr[path],obj]:arr[path].push(obj)}function debug(str){window.console&&console.log&&console.log(str)}function getElementName(name){return options.phpNaming||(name=name.replace(/\[\]$/,"")),name}function populateElement(parentElement,name,value){var selector="id"==options.identifier?"#"+name:"["+options.identifier+'="'+name+'"]',element=jQuery(selector,parentElement);value=value.toString(),value="null"==value?"":value,element.html(value)}function populateFormElement(form,name,value){var name=getElementName(name),element=form[name];if(void 0==element)return(element=jQuery("#"+name,form))?(element.html(value),!0):(options.debug&&debug("No such element as "+name),!1);options.debug&&_populate.elements.push(element),elements=void 0==element.type&&element.length?element:[element];for(var e=0;e<elements.length;e++){var element=elements[e];if(element&&"undefined"!=typeof element&&"function"!=typeof element)switch(element.type||element.tagName){case"radio":element.checked=""!=element.value&&value.toString()==element.value;case"checkbox":for(var values=value.constructor==Array?value:[value],j=0;j<values.length;j++)element.checked|=element.value==values[j];break;case"select-multiple":for(var values=value.constructor==Array?value:[value],i=0;i<element.options.length;i++)for(var j=0;j<values.length;j++)element.options[i].selected|=element.options[i].value==values[j];break;case"select":case"select-one":element.value=value.toString()||value;break;case"text":case"button":case"textarea":case"submit":default:value=null==value?"":value,element.value=value}}}if(void 0===obj)return this;var options=jQuery.extend({phpNaming:!0,phpIndices:!1,resetForm:!0,identifier:"id",debug:!1},options);options.phpIndices&&(options.phpNaming=!0);var arr=[];return parseJSON(obj),options.debug&&(_populate={arr:arr,obj:obj,elements:[]}),this.each(function(){var tagName=this.tagName.toLowerCase(),method="form"==tagName?populateFormElement:populateElement;"form"==tagName&&options.resetForm&&this.reset();for(var i in arr)method(this,i,arr[i])}),this};var IBoxForm=function(iBox,selector){this.layback({element:selector,box:iBox})};!function($,IBoxForm){var lb=layback(IBoxForm).use("setget").make();lb.addMethod("form",function(){return this.getBox().$(this.get("element"))}),lb.addMethod("getFormElement",function(selector){return $(selector,this.form())}),lb.addMethod("populate",function(){return this.form().populate.apply(this.form(),Array.prototype.slice.call(arguments))})}(jQuery,IBoxForm);var IBox=function(options){this.layback(options),this.create()},IBox_Defaults=IBox_Defaults||{};!function($,IBox,IBox_Defaults){IBox._iframeCounter=0,lb=layback(IBox).defaults({data:$.extend({baseUrl:"test/sandboxes",pageUrl:null,iframeId:null,iframe:null,document:null,window:null},IBox_Defaults)}).use("setget").make(),lb.addClassMethod("getNextIframeId",function(iframeId){return"iboxIframe"+IBox._iframeCounter++}),lb.addMethod("destroy",function(){var iframe=this.getIframe();return iframe&&iframe.remove(),this}),lb.addMethod("create",function(iframeId){this.destroy(),this.setIframeId(iframeId||this.getIframeId()||IBox.getNextIframeId()),this.dispatch("create-before"),iframeId=this.getIframeId();var iframe=$('<iframe id="'+iframeId+'"></iframe>');return iframe.appendTo($("body")),this.setIframe(iframe),this.dispatch("create-after"),this}),lb.addMethod("createPageUrl",function(page){return 0===page.indexOf("http://")||0===page.indexOf("https://")||0===page.indexOf("//")?page:this.getBaseUrl()+"/"+page}),lb.addMethod("visitPage",function(page,done){var This=this;return this.setPageUrl(this.createPageUrl(page)),this.dispatch("page-visit-before"),this.getIframe().attr("src",this.getPageUrl()),this.getIframe().load(function(){This.setDocument(this.contentDocument),This.setWindow(this.contentWindow),setTimeout(function(){done&&done(),This.dispatch("page-visit-after")},1e3)}),this}),lb.addMethod("isOnPage",function(page){return this.getIframe().attr("src")==this.createPageUrl(page)}),lb.addMethod("document",function(page,done){return this.getDocument()}),lb.addMethod("window",function(page,done){return this.getWindow()}),lb.addMethod("$",function(selector){return $(selector,this.document())}),lb.addMethod("getVar",function(varname){return this.window()[varname]}),lb.addMethod("getForm",function(selector){return new IBoxForm(this,selector)})}(jQuery,IBox,IBox_Defaults);